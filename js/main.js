(()=>{"use strict";function e(e=[]){if(0==e.length)return"";const t=document.createElement("footer");return t.classList.add("modal__footer"),function(e,t){e.forEach((e=>{const n=document.createElement("button"),{title:o="Button",classList:i="",handler:s=(()=>{})}=e;n.setAttribute("class",i),n.textContent=o,n.onclick=s,t.appendChild(n)}))}(e,t),t}function t(e){let t="";return e.forEach((e=>{t+=function(e){const{id:t,title:n,img:o}=e;return`\n    <div class="card">\n      <h3 class="card__title">${n}</h3>\n      <div class="card__content">\n        <img class="card__image"\n          src="${o}"\n          alt="${n.toLowerCase()}">\n      </div>\n      <div class="options">\n        <button class="card__button view" data-id="${t}" data-function="view-price">\n          View price\n        </button>\n        <button class="card__button delete" data-id="${t}" data-function="delete">\n          Delete\n        </button>\n      </div>\n    </div>`}(e)})),t}function n(e){"function"==typeof e&&e()}const o={modal:function(t){const o=function(t){const n=document.createElement("div"),{title:o,closable:i=!0,content:s="modal_content: not specified",width:a="400px",buttons:l=[]}=t;return n.classList.add("modal"),n.insertAdjacentHTML("afterbegin",`\n    <div class="modal__overlay" data-close="true">\n      <div class="modal__window" style="width: ${a}">\n        <div class="modal__content">\n          <header class="modal__header">\n            <h2 class="modal__title">${o}</h2>\n            ${i?'<div class="modal__close" data-close="true">\n                &times;\n              </div>':""}\n          </header>\n          <main class="modal__main" data-content>\n            ${s}\n          </main>\n        </div>\n      </div>\n    </div>\n  `),0!==l.length&&n.querySelector(".modal__main").insertAdjacentElement("afterend",e(l)),document.body.appendChild(n),n}(t),i={isClosing:!1,isDestroyed:!1},s={open(){i.isDestroyed||i.isClosing?console.error("Modal can't be opened: it is closing at the moment or has been destroyed."):(o.classList.add("open"),n(t.onOpen))},close(){i.isDestroyed?console.error("Modal cannot be closed!"):(n(t.beforeClose),i.isClosing=!0,o.classList.remove("open"),o.classList.add("closing"),setTimeout((()=>{o.classList.remove("closing"),i.isClosing=!1,n(t.onClose)}),200))},setContent(e){o.querySelector("[data-content]").innerHTML=e},setFooter(t){const n=o.querySelector(".modal__footer");n&&n.remove(),0!==t.length&&o.querySelector(".modal__main").insertAdjacentElement("afterend",e(t))},destroy(){o.removeEventListener("click",a),o.remove(),i.isDestroyed=!0}},a=e=>{e.target.getAttribute("data-close")&&t.closable&&s.close()};return o.addEventListener("click",a),s},confirm:function(e){const{title:t,itemName:n}=e;return new Promise((e=>{const i=o.modal({title:t,closable:!1,content:`<p>You want to delete: <span style="font-weight: 600">${n}</span></p>`,width:"400px",onClose(){i.destroy()},buttons:[{title:"Delete",classList:"modal__confirm button",handler(){e(),i.close()}},{title:"Cancel",classList:"modal__cancel button",handler(){i.close()}}]});setTimeout((()=>{i.open()}),100)}))}},i=[{id:1,title:"Oranges",price:20,img:"img/oranges.png"},{id:2,title:"Mangoes",price:14,img:"img/mangoes.png"},{id:3,title:"Apples",price:10,img:"img/apples.png"},{id:4,title:"Pineapples",price:30,img:"img/pineapples.png"}];document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".container");let n=[...i];e.innerHTML=t(n);const s=o.modal({title:"Goods Info",closable:!0,content:"",width:"400px",buttons:[{title:"Close",classList:"modal__confirm button",handler(){s.close()}}]});e.addEventListener("click",(i=>{const a=+i.target.getAttribute("data-id"),l=i.target.getAttribute("data-function");if(!l)return;const c=n.find((e=>e.id===a));switch(l){case"view-price":d=c.title,r=c.price,s.setContent(`\n          <p>Item title: <span style="font-weight: 600">${d}</span></p>\n          <p>Price of one kilogram: <span style="font-weight: 600">${r}UAH</span></p>\n        `),s.open();break;case"delete":o.confirm({title:"Are you sure?",itemName:c.title}).then((()=>{n=n.filter((e=>e.id!==a)),e.innerHTML=t(n)}))}var d,r}))}))})();