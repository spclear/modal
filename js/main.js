(()=>{"use strict";function e(e=[]){if(0==e.length)return"";const t=document.createElement("footer");return t.classList.add("modal__footer"),function(e,t){e.forEach((e=>{const n=document.createElement("button"),{title:o="Button",classList:s="",handler:i=(()=>{})}=e;n.setAttribute("class",s),n.textContent=o,n.onclick=i,t.appendChild(n)}))}(e,t),t}const t={modal:function(t){const n=function(t){const n=document.createElement("div"),{title:o,closable:s=!0,content:i="modal_content: not specified",width:a="400px",buttons:l=[]}=t;return n.classList.add("modal"),n.insertAdjacentHTML("afterbegin",`\n    <div class="modal__overlay" data-close="true">\n      <div class="modal__window" style="width: ${a}">\n        <div class="modal__content">\n          <header class="modal__header">\n            <h2 class="modal__title">${o}</h2>\n            ${s?'<div class="modal__close" data-close="true">\n                &times;\n              </div>':""}\n          </header>\n          <main class="modal__main" data-content>\n            ${i}\n          </main>\n        </div>\n      </div>\n    </div>\n  `),0!==l.length&&n.querySelector(".modal__main").insertAdjacentElement("afterend",e(l)),document.body.appendChild(n),n}(t),o={isClosing:!1,isDestroyed:!1},s={open(){o.isDestroyed||o.isClosing?console.error("Modal can't be opened: it is closing at the moment or has been destroyed."):(n.classList.add("open"),console.log("Modal is opened!"))},close(){o.isDestroyed?console.error("Modal cannot be closed!"):(o.isClosing=!0,n.classList.remove("open"),n.classList.add("closing"),setTimeout((()=>{n.classList.remove("closing"),o.isClosing=!1,console.log("Modal is closed!")}),200))},setContent(e){n.querySelector("[data-content]").innerHTML=e},setFooter(t){const o=n.querySelector(".modal__footer");o&&o.remove(),0!==t.length&&n.querySelector(".modal__main").insertAdjacentElement("afterend",e(t))},destroy(){n.removeEventListener("click",i),n.remove(),o.isDestroyed=!0}},i=e=>{e.target.getAttribute("data-close")&&s.close()};return n.addEventListener("click",i),s}},n=[{id:1,title:"Oranges",price:20,img:"img/oranges.png"},{id:2,title:"Mangoes",price:14,img:"img/mangoes.png"},{id:3,title:"Apples",price:10,img:"img/apples.png"},{id:4,title:"Pineapples",price:30,img:"img/pineapples.png"}];document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".container");e.innerHTML=function(e){let t="";return e.forEach((e=>{t+=function(e){const{id:t,title:n,price:o,img:s}=e;return`\n    <div class="card" data-id="${t}">\n      <h3 class="card__title">${n}</h3>\n      <div class="card__content">\n        <img class="card__image"\n          src="${s}"\n          alt="${n.toLowerCase()}">\n      </div>\n      <div class="options">\n        <button class="card__button view" data-id="${t}" data-function="view-price">\n          View price\n        </button>\n        <button class="card__button delete" data-id="${t}" data-function="delete">\n          Delete\n        </button>\n      </div>\n    </div>`}(e)})),t}(n);const o=t.modal({title:"Goods Info",closable:!0,content:"",width:"400px",buttons:[{title:"OK",classList:"modal__confirm button",handler(){o.close()}}]}),s=t.modal({title:"Delete this item?",closable:!1,content:"<p>Are you sure you want to delete this item?</p>",width:"400px",buttons:[{title:"Confirm",classList:"modal__confirm button",handler(){console.log("Confirmed"),s.close()}},{title:"Cancel",classList:"modal__cancel button",handler(){console.log("Canceled"),s.close()}}]});e.addEventListener("click",(e=>{const t=e.target.getAttribute("data-id"),i=e.target.getAttribute("data-function");if(!i)return;const a=n.find((e=>e.id==t));switch(i){case"view-price":l=a.title,c=a.price,o.setContent(`\n          <p>Item title: <span style="font-weight: 600">${l}</span></p>\n          <p>Price of one kilogram: <span style="font-weight: 600">${c}UAH</span></p>\n        `),o.open();break;case"delete":s.open()}var l,c}))}))})();